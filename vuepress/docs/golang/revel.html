<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Revel - framework for Go | Backend experience</title>
    <meta name="description" content="Experience from life">
    
    
    <link rel="preload" href="/EXPA--Backend/assets/css/0.styles.d51caae0.css" as="style"><link rel="preload" href="/EXPA--Backend/assets/js/app.4fad566d.js" as="script"><link rel="preload" href="/EXPA--Backend/assets/js/7.7fb0503f.js" as="script"><link rel="prefetch" href="/EXPA--Backend/assets/js/13.79778002.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/3.26d14a70.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/4.c5687871.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/5.17dd077d.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/6.c0a0cc3a.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/8.f3ad87f0.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/9.3d337d70.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/10.01a71c81.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/11.9d6687a5.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/12.65f7f493.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/14.30e14941.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/15.f9ddae3e.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/16.544879da.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/17.84c187e0.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/18.ce001abb.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/19.d4decb71.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/20.d22b3b49.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/21.bbe36745.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/22.1be7573e.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/23.5232481c.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/24.83a80aef.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/25.2110d9c9.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/26.599f5413.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/27.daefa652.js">
    <link rel="stylesheet" href="/EXPA--Backend/assets/css/0.styles.d51caae0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/EXPA--Backend/" class="home-link router-link-active"><!----> <span class="site-name">Backend experience</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/EXPA--Backend/" class="nav-link">Home</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/EXPA--Backend/" class="nav-link">Home</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Golang</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/EXPA--Backend/golang/quick-start.html" class="sidebar-link">Basic</a></li><li><a href="/EXPA--Backend/golang/basic.html" class="sidebar-link">Golang</a></li><li><a href="/EXPA--Backend/golang/revel.html" class="active sidebar-link">Revel - framework for Go</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/EXPA--Backend/golang/useful-fns.html" class="sidebar-link">Useful funcs</a></li><li><a href="/EXPA--Backend/golang/useful-links.html" class="sidebar-link">Expa from Golang</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="revel-framework-for-go"><a href="#revel-framework-for-go" aria-hidden="true" class="header-anchor">#</a> <a href="https://revel.github.io" target="_blank" rel="noopener noreferrer">Revel - framework for Go<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <h3 id="содержание"><a href="#содержание" aria-hidden="true" class="header-anchor">#</a> Содержание</h3> <ul><li><a href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA">Запуск</a></li> <li><a href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0">Правила</a></li> <li><a href="#run.bat">Run.bat</a></li> <li><a href="#middlewareinterceptors">Middleware(Interceptors)</a></li> <li><a href="#%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D1%8B">Контроллеры</a></li> <li><a href="#%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8">Модели</a></li> <li><a href="#%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F">Маршрутизация</a></li> <li><a href="#%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F">Валидация</a></li> <li><a href="#%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F">Локализация</a></li> <li><a href="#jobs">Jobs</a></li> <li><a href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F">Проблемы - Решения</a></li></ul> <hr> <h3 id="запуск"><a href="#запуск" aria-hidden="true" class="header-anchor">#</a> Запуск</h3> <p><strong>Приложения после скачки с репо</strong></p> <ol><li>git clone https/ project</li> <li>запустить <strong>Install_pkg.bat</strong> - установит и обновит нужные пакеты в src</li> <li>запустить RUN.bat - где написано <code>revel run app</code></li></ol> <p><strong>Приложения на сервере</strong></p> <ol><li>Скопировать построенный проект на сервер</li> <li>Запустить : <code>run.sh</code> - чере комманду: <code>bash run.sh</code>, если не работает читай пункт 3</li> <li><strong>Ошибка</strong> может возникнуть тогда просто ввести вот это:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>./bars -importPath bars -srcPath ./src -runMode prod
</code></pre></div><h3 id="правиnа"><a href="#правиnа" aria-hidden="true" class="header-anchor">#</a> Правила</h3> <ul><li>в папке <strong>src</strong> должна быть папка <strong>bars</strong> - это текущий проект</li> <li>в .gitignore должны быть (vendors):</li></ul> <div class="language- extra-class"><pre class="language-text"><code>puller.bat
pusher.bat
/src/github.com
/src/golang.org
/src/gopkg.in
</code></pre></div><h3 id="run-bat"><a href="#run-bat" aria-hidden="true" class="header-anchor">#</a> Run.bat</h3> <div class="language-go extra-class"><pre class="language-go"><code>@ECHO OFF

REM SET GOROOT<span class="token operator">=</span>C<span class="token punctuation">:</span>\GO
SET GOPATH<span class="token operator">=</span><span class="token operator">%</span>CD<span class="token operator">%</span>
SET PATH<span class="token operator">=</span><span class="token operator">%</span>GOPATH<span class="token operator">%</span>\BIN<span class="token punctuation">;</span><span class="token operator">%</span>PATH<span class="token operator">%</span><span class="token punctuation">;</span>

rem SET GOOS<span class="token operator">=</span>linux
rem SET GOARCH<span class="token operator">=</span>amd64
rem SET CGO_ENABLED<span class="token operator">=</span><span class="token number">0</span>

REM packages
rem <span class="token keyword">go</span> get github<span class="token punctuation">.</span>com<span class="token operator">/</span>revel<span class="token operator">/</span>revel
rem <span class="token keyword">go</span> get github<span class="token punctuation">.</span>com<span class="token operator">/</span>revel<span class="token operator">/</span>cmd<span class="token operator">/</span>revel

revel run project
pause

</code></pre></div><hr> <h3 id="middleware-interceptors"><a href="#middleware-interceptors" aria-hidden="true" class="header-anchor">#</a> Middleware(Interceptors)</h3> <ul><li>есть 2 способа юзать перехватчик:
<ul><li>Присоеденить к классу(как метод);</li> <li>Использовать в отдельном файле(как функцию)<strong>(проверен)</strong>. Создаем файл <strong>./controllers/Middleware.go</strong> и там пишем какую то проверка и создаем функцию <code>init(){...}</code> в которой надо указать на какой контроллер поцепить эту проверку:</li></ul></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> controllers

<span class="token keyword">import</span> <span class="token string">&quot;github.com/revel/revel&quot;</span>

<span class="token comment">// Проверка авторизации</span>
<span class="token keyword">func</span> <span class="token function">checkUser</span><span class="token punctuation">(</span>c <span class="token operator">*</span>revel<span class="token punctuation">.</span>Controller<span class="token punctuation">)</span> revel<span class="token punctuation">.</span>Result <span class="token punctuation">{</span>

    cookk<span class="token punctuation">,</span> err <span class="token operator">:=</span>  c<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">{</span> <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>Creater<span class="token punctuation">)</span>  <span class="token punctuation">}</span>
    
    ss         <span class="token operator">:=</span>  cookk<span class="token punctuation">.</span>Value
    cook       <span class="token operator">:=</span>  <span class="token function">string</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span>
    
    
    <span class="token comment">// fmt.Println(&quot;Кукочка : &quot;, cook)</span>
    <span class="token comment">// fmt.Println(c.Name)</span>


   <span class="token keyword">if</span>  cook <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span>  <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>Creater<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">// Init all middleware</span>
<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       revel<span class="token punctuation">.</span><span class="token function">InterceptFunc</span><span class="token punctuation">(</span>checkUser<span class="token punctuation">,</span> revel<span class="token punctuation">.</span>BEFORE<span class="token punctuation">,</span>    <span class="token operator">&amp;</span>IndexController<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// revel.InterceptFunc(doNothing, revel.AFTER,     &amp;AuthControler{})</span>
    <span class="token comment">// revel.InterceptFunc(checkUser, revel.BEFORE, &amp;Test{})</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="контроnnеры"><a href="#контроnnеры" aria-hidden="true" class="header-anchor">#</a> Контроллеры</h3> <p>Контроллеры храняться в папке <strong>controllers</strong> в пространстве с таким же именем. Есть возможность создать <strong>базовый контроллер</strong> от которого потом <strong>унаследовать объект Revel и методы этого класса:</strong></p> <h6 id="basecontroller-go"><a href="#basecontroller-go" aria-hidden="true" class="header-anchor">#</a> BaseController.go</h6> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> controllers

<span class="token keyword">import</span> <span class="token string">&quot;github.com/revel/revel&quot;</span>

<span class="token keyword">type</span> BaseController <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token operator">*</span>revel<span class="token punctuation">.</span>Controller
<span class="token punctuation">}</span>

 <span class="token keyword">func</span> <span class="token punctuation">(</span>c BaseController<span class="token punctuation">)</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">RenderText</span><span class="token punctuation">(</span><span class="token string">&quot;hi there&quot;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

</code></pre></div><h6 id="usercontroller-go"><a href="#usercontroller-go" aria-hidden="true" class="header-anchor">#</a> UserController.go</h6> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> controllers

<span class="token keyword">import</span> <span class="token string">&quot;github.com/revel/revel&quot;</span>

<span class="token keyword">type</span> UserController <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	BaseController
<span class="token punctuation">}</span>

 <span class="token keyword">func</span> <span class="token punctuation">(</span>c UserController<span class="token punctuation">)</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">RenderText</span><span class="token punctuation">(</span><span class="token string">&quot;now its user controller&quot;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

</code></pre></div><h3 id="модеnи"><a href="#модеnи" aria-hidden="true" class="header-anchor">#</a> Модели</h3> <p>Модели храняться в папке <strong>models</strong> в пространстве с таким же именем. Для работы с моделью надо её создать и объявить структуру(класс этой модели) и структура может быть пустой:</p> <h6 id="user-go"><a href="#user-go" aria-hidden="true" class="header-anchor">#</a> User.go</h6> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> models


<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token comment">/*... - может быть пустой */</span>
<span class="token punctuation">}</span>

 <span class="token keyword">func</span> <span class="token punctuation">(</span>User <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token function">AddUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... some code here</span>
 <span class="token punctuation">}</span>

</code></pre></div><h3 id="маршрутизация"><a href="#маршрутизация" aria-hidden="true" class="header-anchor">#</a> Маршрутизация</h3> <p>Маршруты храняться в папке <strong>conf/routes</strong>. Синтаксис прост : <code>Метод - адрес - Контроллер.метод</code></p> <h6 id="вот-так-можно-поnучить-передаваемый-в-get-id-в-контроnnере-c-params-get-id"><a href="#вот-так-можно-поnучить-передаваемый-в-get-id-в-контроnnере-c-params-get-id" aria-hidden="true" class="header-anchor">#</a> вот так можно получить передаваемый в GET <code>:id</code> в контроллере - <code>c.Params.Get(&quot;id&quot;)</code></h6> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># Its comment, dont type slash in comment it will brake system</span>
GET      /events/           SomeController.Index                 
POST     /events/           SomeController.Add     
PUT      /events/del/<span class="token punctuation">:</span>id    SomeController.Edit    
DELETE   /events/edit       SomeController.Del    
PUT      /events/change     SomeController.Change   

</code></pre></div><h3 id="ваnидация"><a href="#ваnидация" aria-hidden="true" class="header-anchor">#</a> Валидация</h3> <p>Чтобы выводило все ошибки после всей проверки надо изменить <strong>src/github.com/revel/revel/validation.go:196</strong> строка в функции <code>ValidationFilter(c *Controller, fc []Filter())</code> изменить <code>c.ViewArgs[&quot;errors&quot;] = c.Validation.ErrorMap()</code> на <code>c.RenderArgs[&quot;errors&quot;] = c.Validation.Errors</code></p> <h6 id="eventscontroller-go-index"><a href="#eventscontroller-go-index" aria-hidden="true" class="header-anchor">#</a> EventsController.go - Index()</h6> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c EventsController<span class="token punctuation">)</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> revel<span class="token punctuation">.</span>Result <span class="token punctuation">{</span>
<span class="token operator">...</span>
 <span class="token comment">// Проверка данных</span>
   <span class="token keyword">if</span> c<span class="token punctuation">.</span><span class="token function">EventValidator</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/events/&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="eventscontroller-go-eventvalidator"><a href="#eventscontroller-go-eventvalidator" aria-hidden="true" class="header-anchor">#</a> EventsController.go - EventValidator()</h6> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c EventsController<span class="token punctuation">)</span> <span class="token function">EventValidator</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> email <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>

	<span class="token comment">// проверка</span>
    c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">Required</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">&quot;Title is required&quot;</span><span class="token punctuation">)</span>
    c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">MaxSize</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">&quot;Title must be less than 40 symbols, u tard&quot;</span><span class="token punctuation">)</span>

    c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">Required</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">&quot;Email is required&quot;</span><span class="token punctuation">)</span>
    c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">Email</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">&quot;Email is not valid, u piece of poo&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">// если нашлись ошибки после проверки</span>
	<span class="token keyword">if</span> c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">HasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     c<span class="token punctuation">.</span>Validation<span class="token punctuation">.</span><span class="token function">Keep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment">// в переменную errors записуем все ошибки  (на шаблоне - {{range .errors}} {{.}} {{end}})</span>
     c<span class="token punctuation">.</span><span class="token function">FlashParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// все данные которые пришли формы доступны в Flash (на шаблоне - {{.flash.email_field}})</span>
     <span class="token keyword">return</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
	 <span class="token keyword">return</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="локаnизация"><a href="#локаnизация" aria-hidden="true" class="header-anchor">#</a> Локализация</h3> <p><em>Установка локализации идет в 3 шага (проверки):</em></p> <ol><li>Revel ищет куки с префиксом <code>REVEL</code> по-ум. и постфиксом <code>_LANG</code> , префикс устанавливаеться в файл conf/app.conf -&gt; <code>cookie.prefix = REVEL</code>, и выходит что оно ищет куку с названием - <strong>REVEL_LANG</strong>, которая содержит название текущего языка - <code>'ru', 'en', 'fr'</code> и так далее.</li> <li>Если куки <code>REVEL_LANG</code> - не существует, начнеться проверка <strong>Accept-Language HTTP header</strong>, другими словами проверка башки запроса  которая приходит от клиента</li> <li>Если не удаеться определить язык и по <strong>2 пункту</strong>, тогда устанавливаеться язык по-ум. который лежит в conf/app.conf -&gt; <code>i18n.default_language = en</code></li> <li>Переменные перевода лежат в <code>/messages/messages.en, messages.ru...</code></li> <li>На шаблоне юзать так - <strong>(( msg . &quot;gree&quot;  ))</strong>, в контроллере так - <strong>c.Message(&quot;gree&quot;)</strong></li></ol> <h3 id="jobs"><a href="#jobs" aria-hidden="true" class="header-anchor">#</a> Jobs</h3> <ol><li>Создать в контроллерах(папке) - <strong>ex_job.go</strong>:</li></ol> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> controllers

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;time&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>

    <span class="token string">&quot;github.com/revel/revel&quot;</span>
    <span class="token string">&quot;github.com/revel/modules/jobs/app/jobs&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> ReminderEmails <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token comment">// Filtered</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e ReminderEmails<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    revel<span class="token punctuation">.</span><span class="token function">OnAppStart</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// jobs.Schedule(&quot;0 0 0 * * ?&quot;,  ReminderEmails{})</span>
        <span class="token comment">// jobs.Schedule(&quot;@midnight&quot;,    ReminderEmails{})</span>
        <span class="token comment">// jobs.Schedule(&quot;@every 24h&quot;,   ReminderEmails{})</span>
        jobs<span class="token punctuation">.</span><span class="token function">Every</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">,</span>    ReminderEmails<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// каждую секунду пишет &quot;hello&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="пробnемы-решения"><a href="#пробnемы-решения" aria-hidden="true" class="header-anchor">#</a> Проблемы - Решения</h3> <ol><li><p><strong>Revel - вывод ошибок</strong>: в стандартной сборке после валидации данных Revel отдает только 1 строку ошибки валидации, а точнее первое сообщение. <strong>Решение</strong> - в файле <strong>src/github.com/revel/revel/validation.go</strong> в функции <code>ValidationFilter(c *Controller, fc []Filter())</code> изменить <code>c.RenderArgs[&quot;errors&quot;] = c.Validation.ErrorMap(</code>) на <code>c.RenderArgs[&quot;errors&quot;] = c.Validation.Errors</code></p></li> <li><p><strong>Если при запуске</strong> пишет: <code>no mode found</code>.  <strong>src/github.com/revel/revel/revel.go</strong> - надо закоментить следуещие:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>if !Config.HasSection(mode) {
	// 	log.Fatalln(&quot;app.conf: No mode found:&quot;, mode)
	// }
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/EXPA--Backend/golang/basic.html" class="prev">
          Golang
        </a></span> <span class="next"><a href="/EXPA--Backend/golang/useful-fns.html">
          Useful funcs
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/EXPA--Backend/assets/js/7.7fb0503f.js" defer></script><script src="/EXPA--Backend/assets/js/app.4fad566d.js" defer></script>
  </body>
</html>
