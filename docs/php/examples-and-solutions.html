<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Examples | Backend experience</title>
    <meta name="description" content="Experience from life">
    
    
    <link rel="preload" href="/EXPA--Backend/assets/css/0.styles.3b228259.css" as="style"><link rel="preload" href="/EXPA--Backend/assets/js/app.4e443efa.js" as="script"><link rel="preload" href="/EXPA--Backend/assets/js/23.6deb651c.js" as="script"><link rel="prefetch" href="/EXPA--Backend/assets/js/13.738347d8.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/3.849edfd3.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/4.eeb814f1.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/5.32c3d856.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/6.10b7172f.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/7.a41f5bb0.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/8.ff252e6a.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/9.cf77fd03.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/10.83c7c248.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/11.ec7d1327.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/12.d2432dec.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/14.91c6b82f.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/15.f0e73d7d.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/16.be01e3f6.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/17.35a9a626.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/18.7d72c24b.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/19.75724573.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/20.5e8fbceb.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/21.a6479be9.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/22.e8c8ba3b.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/24.9acabd2d.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/25.df51d003.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/26.4908c756.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/27.607a46e5.js"><link rel="prefetch" href="/EXPA--Backend/assets/js/28.8525d1d3.js">
    <link rel="stylesheet" href="/EXPA--Backend/assets/css/0.styles.3b228259.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/EXPA--Backend/" class="home-link router-link-active"><!----> <span class="site-name">Backend experience</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/EXPA--Backend/" class="nav-link">Home</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/EXPA--Backend/" class="nav-link">Home</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>PHP</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/EXPA--Backend/php/composer.html" class="sidebar-link">Composer</a></li><li><a href="/EXPA--Backend/php/examples-and-solutions.html" class="active sidebar-link">Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#как-запустить-встроенный-сервер-php" class="sidebar-link">Как запустить встроенный сервер PHP:</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#из-массива-в-строку-и-ставим-в-cookies" class="sidebar-link">Из массива в строку и ставим в Cookies</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#closure-anonymys-func-and-reference-vars" class="sidebar-link">Closure(Anonymys func) and Reference vars</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#traits" class="sidebar-link">Traits</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#namespace-and-use" class="sidebar-link">Namespace and Use</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#objects-of-stdclass" class="sidebar-link">Objects of stdClass</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#from-mysqli-to-pdo" class="sidebar-link">FROM MySQLi - TO PDO</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#перехват-ошибок" class="sidebar-link">Перехват ошибок</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#передача-переменных-между-php-файnами-посредством-сессии" class="sidebar-link">Передача переменных между PHP-файлами посредством сессии</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#функция-ругаnась-что-не-видеnа-переменных-user-data-e-password-e-login" class="sidebar-link">Функция ругалась что не видела переменных $userdata, $epassword, $e_login</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#connection-to-db" class="sidebar-link">Connection to DB</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#генератор-пароnей" class="sidebar-link">Генератор паролей</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#delete-cookies" class="sidebar-link">Delete Cookies</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#добавnяет-запись-про-просмотр-статьи" class="sidebar-link">Добавляет запись про просмотр статьи</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#считает-коnичество-nайков-на-заданную-страницу" class="sidebar-link">Считает количество лайков на заданную страницу</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#функция-дnя-поnучение-рандомных-имен-дnя-картинок" class="sidebar-link">Функция для получение рандомных имен для картинок</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#действие-удаnение-опасного-кода-в-переменных-от-поnьзоватеnей-и-хакеристов" class="sidebar-link">Действие : Удаление опасного кода в переменных от пользователей и хакеристов</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#проверяет-запоnнена-nи-форма" class="sidebar-link">Проверяет заполнена ли форма</a></li><li class="sidebar-sub-header"><a href="/EXPA--Backend/php/examples-and-solutions.html#действие-проверяет-почты-на-допустимость-по-знакам" class="sidebar-link">Действие : Проверяет почты на допустимость по знакам.</a></li></ul></li><li><a href="/EXPA--Backend/php/laravel.html" class="sidebar-link">Laravel</a></li><li><a href="/EXPA--Backend/php/sqlite.html" class="sidebar-link">SQlite</a></li><li><a href="/EXPA--Backend/php/symfony.html" class="sidebar-link">Symfony</a></li><li><a href="/EXPA--Backend/php/websockets.html" class="sidebar-link">Webscokets</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Golang</span> <span class="arrow right"></span></p> <!----></div></li><li><a href="/EXPA--Backend/c-sharp.html" class="sidebar-link">C#</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples</h1> <h3 id="useful-links"><a href="#useful-links" aria-hidden="true" class="header-anchor">#</a> Useful links</h3> <ul><li>Composer CheatSheet - http://composer.json.jolicode.com/</li> <li>PHP.su - http://www.php.su/phphttp/forms/?elements</li> <li>Дмитрий Афанасьев - http://simple-training.com/category/php-tips/</li> <li>ReactPHP - https://reactphp.org/</li> <li>Patterns - http://designpatternsphp.readthedocs.io/ru/latest/README.html</li></ul> <h4 id="содержание"><a href="#содержание" aria-hidden="true" class="header-anchor">#</a> Содержание</h4> <ul><li>Как запустить встроенный сервер PHP</li> <li>Из массива в строку и ставим в Cookies</li> <li>Closure(Anonymys func) and Reference vars</li> <li>Traits</li> <li>Namespace and Use</li> <li>Objects of stdClass</li> <li>__autoload</li> <li>FROM MySQLi - TO PDO</li> <li>Перехват ошибок</li> <li>Передача переменных между PHP-файлами посредством сессии</li> <li>Функция ругалась что не видела переменных $user_data, $e_password, $e_login</li> <li>Connection to DB</li> <li>Генератор паролей</li> <li>Delete Cookies</li> <li>Добавляет запись про просмотр статьи</li> <li>Считает количество лайков на заданную страницу</li> <li>Функция для получение рандомных имен для картинок</li> <li>Действие : Удаление опасного кода в переменных от пользователей и хакеристов</li> <li>Проверяет заполнена ли форма</li> <li>Действие : Проверяет почты на допустимость по знакам.</li></ul> <hr> <h2 id="как-запустить-встроенный-сервер-php"><a href="#как-запустить-встроенный-сервер-php" aria-hidden="true" class="header-anchor">#</a> Как запустить встроенный сервер PHP:</h2> <div class="language- extra-class"><pre class="language-text"><code>php -S localhost:8000
</code></pre></div><h2 id="из-массива-в-строку-и-ставим-в-cookies"><a href="#из-массива-в-строку-и-ставим-в-cookies" aria-hidden="true" class="header-anchor">#</a> Из массива в строку и ставим в Cookies</h2> <ul><li><strong>index.php</strong> - из массива делает строку и записывает в куку</li> <li><strong>page.php</strong> - из строки которая в куке делает массив</li> <li><strong>off.php</strong> - удаляет массив</li></ul> <h6 id="index-php"><a href="#index-php" aria-hidden="true" class="header-anchor">#</a> index.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// МАссив</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
         <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Driver3@meta.ua'</span><span class="token punctuation">,</span>
         <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'12345'</span>
       <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Делаем строку</span>
<span class="token variable">$rez</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Вывод строки полученной</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$rez</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// SET </span>
<span class="token function">setcookie</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;nabor&quot;</span><span class="token punctuation">,</span><span class="token variable">$rez</span><span class="token punctuation">,</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">8600</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token delimiter important">?&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>See cooka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>off.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>DElete cooka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h6 id="page-php"><a href="#page-php" aria-hidden="true" class="header-anchor">#</a> page.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token variable">$nabor</span> <span class="token operator">=</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'nabor'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//var_dump($nabor);</span>

<span class="token variable">$rez</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$nabor</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">echo</span> <span class="token variable">$rez</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$rez</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'password'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">;</span>

</span></code></pre></div><h6 id="off-php"><a href="#off-php" aria-hidden="true" class="header-anchor">#</a> off.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">setcookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'nabor'</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">86400</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//header(&quot;Location:page.php&quot;);</span>

</span></code></pre></div><h2 id="closure-anonymys-func-and-reference-vars"><a href="#closure-anonymys-func-and-reference-vars" aria-hidden="true" class="header-anchor">#</a> Closure(Anonymys func) and Reference vars</h2> <h6 id="index-php-2"><a href="#index-php-2" aria-hidden="true" class="header-anchor">#</a> index.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token comment">// reference by var </span>
 <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$var</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
   <span class="token variable">$var</span><span class="token operator">++</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token function">foo</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">echo</span> <span class="token variable">$var</span><span class="token punctuation">;</span>
 
 
 <span class="token comment">// Closure</span>
<span class="token variable">$message</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'hello'</span><span class="token punctuation">;</span>
 
<span class="token comment">// No &quot;use&quot; out - NULL</span>
<span class="token variable">$example</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;first -&gt; &quot;</span><span class="token punctuation">;</span>
    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// Inherit $message - out - hello</span>
<span class="token variable">$example</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;&lt;br&gt;second -&gt; &quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</span></code></pre></div><h2 id="traits"><a href="#traits" aria-hidden="true" class="header-anchor">#</a> Traits</h2> <p>Трейт (англ. trait) - это механизм обеспечения повторного использования кода в языках с поддержкой единого наследования,
таких как PHP. Трейт очень похож на класс, но предназначен для групирования функционала хорошо структурированым и
последовательным образом. Невозможно создать самостоятельный экземпляр трейта. Это дополнение к обычному наследованию
и позволяет сделать горизонтальную композицию поведения, то есть применение членов класса без необходимости наследования.</p> <h6 id="traits-php"><a href="#traits-php" aria-hidden="true" class="header-anchor">#</a> Traits.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">trait</span> <span class="token class-name">MyTrait</span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">Bye</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Its method from trait - Bye()&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h6 id="index-php-3"><a href="#index-php-3" aria-hidden="true" class="header-anchor">#</a> Index.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// including Traits.php</span>
    <span class="token keyword">use</span> <span class="token package">MyTrait</span><span class="token punctuation">;</span>

   <span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Its A method - Hello()&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$some</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">;</span>
<span class="token variable">$some</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$some</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Bye</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="namespace-and-use"><a href="#namespace-and-use" aria-hidden="true" class="header-anchor">#</a> Namespace and Use</h2> <p>Файлы могут быть в одной папке, но иметь разные пространства имен. Например если в файлах одинаковые классы, то в таком случае зарешают пространства. В данном примере все файлы находяться в одной папке.</p> <h6 id="class1-php"><a href="#class1-php" aria-hidden="true" class="header-anchor">#</a> class1.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token punctuation">{</span>

	<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	  <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Hello dude, its App space&quot;</span><span class="token punctuation">;</span>
	  <span class="token keyword">return</span> <span class="token punctuation">;</span>  
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><h6 id="class2-php"><a href="#class2-php" aria-hidden="true" class="header-anchor">#</a> class2.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	  <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Hello dude, its App\Models space&quot;</span><span class="token punctuation">;</span>
	  <span class="token keyword">return</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><h6 id="index-php-4"><a href="#index-php-4" aria-hidden="true" class="header-anchor">#</a> index.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">include</span> <span class="token single-quoted-string string">'class1.php'</span><span class="token punctuation">;</span> <span class="token comment">// тут класс с названием Index </span>
<span class="token keyword">include</span> <span class="token single-quoted-string string">'class2.php'</span><span class="token punctuation">;</span>  <span class="token comment">// и тут класс с таким же названием</span>

<span class="token comment">// без &quot;use&quot; классы не будут видны здесь, хоть они и подключены свыше</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Index</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Index</span> <span class="token keyword">as</span> IndexModel<span class="token punctuation">;</span>

<span class="token variable">$index</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$index</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$grand</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$grand</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="objects-of-stdclass"><a href="#objects-of-stdclass" aria-hidden="true" class="header-anchor">#</a> Objects of stdClass</h2> <p>Обьект класса <code>stdClass</code> это как объект в JS. После создания объекта внутри пусто , но это как объект(объект класса).</p> <div class="language-php extra-class"><pre class="language-php"><code> <span class="token comment">// создание обьекта</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">;</span>

<span class="token comment">// добавляем переменные</span>
<span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span>    <span class="token operator">=</span> <span class="token single-quoted-string string">'Joker'</span><span class="token punctuation">;</span>
<span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">surname</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Petrovich'</span><span class="token punctuation">;</span>

<span class="token comment">// добавление ф-ции</span>
<span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">calc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$obj</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// вызов ф-ции</span>
<span class="token variable">$func</span> <span class="token operator">=</span> <span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">calc</span><span class="token punctuation">;</span>
<span class="token variable">$func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// OR</span>
<span class="token punctuation">(</span><span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">calc</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="autoload"><a href="#autoload" aria-hidden="true" class="header-anchor">#</a> __autoload</h3> <p>Автоматичское подключение файлов с классами в которых есть нужные экземпляры</p> <h6 id="index-php-5"><a href="#index-php-5" aria-hidden="true" class="header-anchor">#</a> ./index.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">spl_autoload_register</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$class_name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token variable">$filename</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'./ctrls/'</span><span class="token punctuation">.</span><span class="token variable">$class_name</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'.php'</span><span class="token punctuation">;</span>
	   <span class="token comment">// echo $class_name . PHP_EOL;</span>
	 <span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Freak</span><span class="token punctuation">;</span>
<span class="token variable">$obj</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="ctrls-freak-php"><a href="#ctrls-freak-php" aria-hidden="true" class="header-anchor">#</a> ./ctrls/freak.php</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">Freak</span><span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">words</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h2 id="from-mysqli-to-pdo"><a href="#from-mysqli-to-pdo" aria-hidden="true" class="header-anchor">#</a> FROM MySQLi - TO PDO</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$db</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">)</span>
<span class="token function">mysqli_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">)</span>
mysqli_real_string_escape <span class="token operator">=</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysqli_nums_row <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">countRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="перехват-ошибок"><a href="#перехват-ошибок" aria-hidden="true" class="header-anchor">#</a> Перехват ошибок</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span> <span class="token punctuation">(</span><span class="token single-quoted-string string">'Это ошибка епты'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">catch</span><span class="token punctuation">(</span>Exception <span class="token variable">$e</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Исключение &quot;</span> <span class="token punctuation">.</span> <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;: &quot;</span> <span class="token punctuation">.</span> <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;&lt;br&gt;&quot;</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot; в &quot;</span> <span class="token punctuation">.</span> <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;, строка &quot;</span>  <span class="token punctuation">.</span> <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><h2 id="передача-переменных-между-php-файnами-посредством-сессии"><a href="#передача-переменных-между-php-файnами-посредством-сессии" aria-hidden="true" class="header-anchor">#</a> Передача переменных между PHP-файлами посредством сессии</h2> <h6 id="можно-испоnьзовать-сессии-которые-в-отnичие-от-cookie-храняться-на-сервере-и-стираються-посnе-закрития-браузера-session-start-на-каждой-странице-где-юзаеться-сессия"><a href="#можно-испоnьзовать-сессии-которые-в-отnичие-от-cookie-храняться-на-сервере-и-стираються-посnе-закрития-браузера-session-start-на-каждой-странице-где-юзаеться-сессия" aria-hidden="true" class="header-anchor">#</a> Можно использовать сессии, которые в отличие от cookie, храняться на сервере, и стираються после закрития браузера. session_start() - на каждой странице где юзаеться сессия</h6> <div class="language-php extra-class"><pre class="language-php"><code> <span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'bonskii'</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>

//Обращаться к значению, сохранённому в сессии можно используя суперглобальный массив:

 <span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token keyword">echo</span> <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><h2 id="функция-ругаnась-что-не-видеnа-переменных-user-data-e-password-e-login"><a href="#функция-ругаnась-что-не-видеnа-переменных-user-data-e-password-e-login" aria-hidden="true" class="header-anchor">#</a> Функция ругалась что не видела переменных $user_data, $e_password, $e_login</h2> <h6 id="и-через-global-все-работает"><a href="#и-через-global-все-работает" aria-hidden="true" class="header-anchor">#</a> и через global все работает</h6> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">function</span> <span class="token function">checkForPass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
	<span class="token keyword">global</span> <span class="token variable">$user_data</span><span class="token punctuation">;</span>
	<span class="token keyword">global</span> <span class="token variable">$e_password</span><span class="token punctuation">;</span>  <span class="token comment">// or like that -&gt; $GLOBALS['e_password'];</span>
	<span class="token keyword">global</span> <span class="token variable">$e_login</span><span class="token punctuation">;</span>


	  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$user_data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pass'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token variable">$e_password</span><span class="token punctuation">)</span>  <span class="token comment">// ** $e_password = $GLOBALS['e_password']</span>
						  <span class="token punctuation">{</span>
						   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;&lt;h2&gt; You exist in database. &lt;/h2&gt;&quot;</span><span class="token punctuation">;</span>
							<span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;&lt;h3&gt; Welcome <span class="token interpolation"><span class="token variable">$e_login</span></span>. &lt;/h3&gt;&quot;</span><span class="token punctuation">;</span>
						  <span class="token punctuation">}</span>

						<span class="token keyword">else</span>
						  <span class="token punctuation">{</span>
						  <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Wrong password&quot;</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></code></pre></div><h2 id="connection-to-db"><a href="#connection-to-db" aria-hidden="true" class="header-anchor">#</a> Connection to DB</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">Connect_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
	 <span class="token keyword">include</span> <span class="token single-quoted-string string">'connect.php'</span><span class="token punctuation">;</span> <span class="token comment">// Data of Connection</span>
	 <span class="token keyword">try</span><span class="token punctuation">{</span>
	      <span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDO</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;mysql:host=<span class="token interpolation"><span class="token variable">$host</span></span>;dbname=<span class="token interpolation"><span class="token variable">$db_name</span></span>&quot;</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	      <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ERRMODE_EXCEPTION</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_DEFAULT_FETCH_MODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	      <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SET NAMES utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$db</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token variable">$db</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Cant connect to DB'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>

	 <span class="token keyword">catch</span><span class="token punctuation">(</span>PDOException <span class="token variable">$e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span>  <span class="token function">Connect_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// CONNECT VAR</span>
</code></pre></div><h2 id="генератор-пароnей"><a href="#генератор-пароnей" aria-hidden="true" class="header-anchor">#</a> Генератор паролей</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">Generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Символы, которые будут использоваться в пароле.</span>
  <span class="token variable">$chars</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;qazxswedcvfrtgbnhyujmkiolp1234567890QAZXSWEDCVFRTGBNHYUJMKIOLP&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// Количество символов в пароле.</span>
  <span class="token variable">$max</span><span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token comment">// Определяем количество символов в $chars</span>
  <span class="token variable">$size</span><span class="token operator">=</span><span class="token function">StrLen</span><span class="token punctuation">(</span><span class="token variable">$chars</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">// Определяем пустую переменную, в которую и будем записывать символы.</span>
  <span class="token variable">$password</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// Создаём пароль.</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$max</span><span class="token operator">--</span><span class="token punctuation">)</span>
  <span class="token variable">$password</span><span class="token punctuation">.</span><span class="token operator">=</span><span class="token variable">$chars</span><span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$size</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token variable">$password</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="delete-cookies"><a href="#delete-cookies" aria-hidden="true" class="header-anchor">#</a> Delete Cookies</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">DelCookie</span><span class="token punctuation">(</span><span class="token variable">$cook</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
   <span class="token function">setcookie</span><span class="token punctuation">(</span><span class="token variable">$cook</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">86400</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><h2 id="добавnяет-запись-про-просмотр-статьи"><a href="#добавnяет-запись-про-просмотр-статьи" aria-hidden="true" class="header-anchor">#</a> Добавляет запись про просмотр статьи</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">ViewedPage</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
    <span class="token variable">$db</span> <span class="token operator">=</span> <span class="token function">Connect_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Ловим IP- человека который смотрел статью</span>
		 <span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token double-quoted-string string">&quot;REMOTE_ADDR&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Запрос на запись есть ли уже такая же запись</span>
    <span class="token variable">$query_is_exist</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SELECT * FROM viewed_pages WHERE user = '<span class="token interpolation"><span class="token variable">$ip</span></span>' AND page = <span class="token interpolation"><span class="token variable">$page</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$kol_vo</span> <span class="token operator">=</span> <span class="token variable">$query_is_exist</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Если нашло хоть 1 запись</span>
	  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$kol_vo</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;INSERT INTO viewed_pages(user, page) VALUES( '<span class="token interpolation"><span class="token variable">$ip</span></span>', <span class="token interpolation"><span class="token variable">$page</span></span> )&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><h2 id="считает-коnичество-nайков-на-заданную-страницу"><a href="#считает-коnичество-nайков-на-заданную-страницу" aria-hidden="true" class="header-anchor">#</a> Считает количество лайков на заданную страницу</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">CounterLikes</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
   <span class="token variable">$db</span> <span class="token operator">=</span> <span class="token function">Connect_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token variable">$query_likes</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SELECT * FROM likes WHERE likes_page = <span class="token interpolation"><span class="token variable">$page</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token variable">$likes</span> <span class="token operator">=</span>  <span class="token variable">$query_likes</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

	 <span class="token keyword">return</span> <span class="token variable">$likes</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="функция-дnя-поnучение-рандомных-имен-дnя-картинок"><a href="#функция-дnя-поnучение-рандомных-имен-дnя-картинок" aria-hidden="true" class="header-anchor">#</a> Функция для получение рандомных имен для картинок</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">DFileHelper</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getRandomFileName</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$extension</span><span class="token operator">=</span><span class="token single-quoted-string string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$extension</span> <span class="token operator">=</span> <span class="token variable">$extension</span> <span class="token operator">?</span> <span class="token single-quoted-string string">'.'</span> <span class="token punctuation">.</span> <span class="token variable">$extension</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
        <span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$path</span> <span class="token operator">?</span> <span class="token variable">$path</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/'</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>

        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">microtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$path</span> <span class="token punctuation">.</span> <span class="token variable">$name</span> <span class="token punctuation">.</span> <span class="token variable">$extension</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="действие-удаnение-опасного-кода-в-переменных-от-поnьзоватеnей-и-хакеристов"><a href="#действие-удаnение-опасного-кода-в-переменных-от-поnьзоватеnей-и-хакеристов" aria-hidden="true" class="header-anchor">#</a> Действие : Удаление опасного кода в переменных от пользователей и хакеристов</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">StringCleaner</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
   <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token function">htmlentities</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Против - апострофа '</span>
   <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token variable">$var</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="проверяет-запоnнена-nи-форма"><a href="#проверяет-запоnнена-nи-форма" aria-hidden="true" class="header-anchor">#</a> Проверяет заполнена ли форма</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">filled_out</span><span class="token punctuation">(</span><span class="token variable">$form_var</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$form_var</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token variable">$form_var</span> <span class="token operator">==</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><h2 id="действие-проверяет-почты-на-допустимость-по-знакам"><a href="#действие-проверяет-почты-на-допустимость-по-знакам" aria-hidden="true" class="header-anchor">#</a> Действие : Проверяет почты на допустимость по знакам.</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">valid_email</span><span class="token punctuation">(</span><span class="token variable">$adress</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
	  <span class="token comment">//Проверить допустимость адреса</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ereg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9\-]+\.[a-zA=z0-9\-\.]+$'</span><span class="token punctuation">,</span><span class="token variable">$adress</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/EXPA--Backend/php/composer.html" class="prev">
          Composer
        </a></span> <span class="next"><a href="/EXPA--Backend/php/laravel.html">
          Laravel
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/EXPA--Backend/assets/js/23.6deb651c.js" defer></script><script src="/EXPA--Backend/assets/js/app.4e443efa.js" defer></script>
  </body>
</html>
